<link rel="stylesheet" type="text/css" media="screen">


#main_toolbar {

    position: absolute;
    left: 500px;


	padding: 0px;
	padding-left: 5px;
	margin-top: 4px;
    margin-bottom: 0px;
    margin-right: 5px;
    border: 1px solid #000;
    width: 120px;
    height: 20px;
    vertical-align: middle;
    border-radius: 0px;
    overflow: hidden;
    background-color: #fff;
    background: #fff url("http://maps.gstatic.com/mapfiles/arrow-down.png") no-repeat 90% 50%;
}

#weather_toolbar {

   position: absolute;
    left: 300px;
	padding: 0px;
	padding-left: 5px;
	margin-top: 4px;
    margin-bottom: 5px;
    border: 1px solid #000;
    width: 120px;
    height: 20px;
    vertical-align: middle;
    border-radius: 0px;
    overflow: hidden;
    background-color: #fff;
    background: #fff url("http://maps.gstatic.com/mapfiles/arrow-down.png") no-repeat 90% 50%;

}

.mapChartsButton {
    padding: 0px;
    margin: 0;
    margin-left: 0px;
    margin-bottom: 0px;
    width: 120px;
    height: 20px;
    vertical-align: middle;
    border: 1px solid #000;
    box-shadow: none;
    background-color: transparent;
    background-image: none;
    -webkit-appearance: none;
       -moz-appearance: none;
            appearance: none;
}


form#charts_form{
  width: 120px;
  height: 20px;
  vertical-align: middle;
  padding: 0px;
  padding-bottom:0px;
  margin: 0px;
  }

form#weather_form{
  height: 20px;
  vertical-align: middle;
  padding: 0px;
  padding-bottom:0px;
  }  
  
form select.mapChartsButton{
    padding: 0px 0px;
    width: 120px;
    margin-bottom: 0px;
    height: 20px;
    border: none;
    outline: none;
    box-shadow: none;
    background-color: transparent;
    background-image: none;
    -webkit-appearance: none;
       -moz-appearance: none;
            appearance: none;
	}
	
form select.mapButton{
    padding: 0px 0px;
    width: 120px;
    margin-bottom: 0px;
    height: 20px;
    border: none;
    outline: none;
    box-shadow: none;
    background-color: transparent;
    background-image: none;
    -webkit-appearance: none;
       -moz-appearance: none;
            appearance: none;
	}
		
/* PAGE HEADER */
.page-header{
    border-bottom:0px; 
    padding-top:3.0em;
    margin-bottom:4.0em;
    height:320px;
    overflow:hidden;
    box-shadow: 0 4px 7px -2px gray;
}
.page-header .big-image{
    float:right;
    width:225px;
    margin-right:10.0em;
}
.page-header .content{
    margin-left:7.0em; 
    margin-top:2.0em;
    float:left;
}
.page-header .content h1{
    border-bottom:0px; 
    font-size:2.0em;
    text-shadow: 1px 1px #aaa;
}
.page-header .content p{
    width:500px;   
    font-size:1.5em;
}

/* Widescreen */
@media only screen and (min-width: 1199px){


}

/* Tablet (Landscape) */
@media only screen and (min-width: 992px) and (max-width: 1199px){

	/* GLOBAL */
	.search-containers .bootstrap-select{
		width:235px !important;
	}
    
    /* ID */
	body.page-id .image{
        width:500px;
    }

}


/* Tablet (Portrait) */
@media only screen and (min-width: 768px) and (max-width: 959px) {

	/* GLOBAL */
	.nav>li>a{
		padding: 10px 10px;
	}
	.navbar-nav{
		margin-top:8px;
	}
	.search-containers .bootstrap-select{
		width:165px !important;
	}
	.navbar .navbar-brand{
		margin-left:0px !important;
	}
	.navbar .social{
		display:none;
	}
	.navbar form{
		width:120px;
	}
	.navbar form input[type="text"]{
		width:75%;
	}

	/* ID */
	body.page-id .image{
        width:425px;
    }

}


/* Mobile (Portrait/Landscape) */
@media only screen and (max-width: 767px) {

    /* GLOBAL */
    body{
	    padding-top:0px;
    }
  	
	.container.main-content{
	    padding-left:0px;
	    padding-right:0px;
	    padding-top:60px;
	}
	input[type="text"],
	input[type="submit"],
    select,
    textarea{
	    width:100% !important;
	    margin-bottom:5px;
    }

 #weather_legend {
    background: white;
    opacity: 0.8;
    margin-bottom: 60px;
    margin-left: 90px;

  }

    .select-item input[type="text"]{
	    width:90% !important;
    }
    .select-item button{
	    padding-left:5px;
    }
    .dropdown-menu{
	    background-color:#fff !important;
    }
    .dropdown-menu>li>a{
	    color:#fff;
	    padding-left:10px;
    }
    .dropdown-menu>li>a:hover{
	    color:#fff;
    }
    .navbar-collapse{
			padding-left:25px;
		}
	.navbar-brand{
    	padding-left:5px;
    	margin-bottom:0px;
    	margin-left:10px;
    }
    .navbar-nav{
			float:none;
			margin-top:inherit;
		}
		.navbar .social{
			display:none;
		}
		.navbar form{
			display: none;
		}
		.navbar .fa{
			color:#fff;
		}
		.navbar-toggle{
			margin-right: 10px;
			padding: 9px 5px;
			border: 1px solid #666;
		}
		.navbar-toggle .icon-bar{
			border-bottom:1px solid #666;
		}
		.column{
			padding:10px;
		}
	.search-explore,
	.search-explore a{
		display:block;
		width:100%;
	}
	.search-explore a{
		text-transform: uppercase;
	}
	.search-explore a i{
		float:right;
	}
	.search-containers{
		display:none;
	}
	footer{
		padding-top:0px !important;
	}
	.table-responsive{
	    margin-left:-15px;
      width:110%;
	}
	.col-xs-1, .col-sm-1, .col-md-1, .col-lg-1, .col-xs-2, .col-sm-2, .col-md-2, .col-lg-2, .col-xs-3, .col-sm-3, .col-md-3, .col-lg-3, .col-xs-4, .col-sm-4, .col-md-4, .col-lg-4, .col-xs-5, .col-sm-5, .col-md-5, .col-lg-5, .col-xs-6, .col-sm-6, .col-md-6, .col-lg-6, .col-xs-7, .col-sm-7, .col-md-7, .col-lg-7, .col-xs-8, .col-sm-8, .col-md-8, .col-lg-8, .col-xs-9, .col-sm-9, .col-md-9, .col-lg-9, .col-xs-10, .col-sm-10, .col-md-10, .col-lg-10, .col-xs-11, .col-sm-11, .col-md-11, .col-lg-11, .col-xs-12, .col-sm-12, .col-md-12, .col-lg-12{
			padding-left:0px;
			padding-right:0px;
		}
		body.page-id .col-sm-4{
			padding-left:15px;
			padding-right:15px;
		}
		.sidebar{
			display:none;
		}
		.search-containers .bootstrap-select{
			width:250px !important;
		}
		.search-containers .bootstrap-select ul li a{
			color:#000;
		}
		.search-containers .search-box{
			margin-right:0px;
			margin-bottom:0.5em;
		}
		.alphabet .alphabet-item{
			width:40% !important;
		}
		.table-responsive{
			border-bottom:0px;
		}
    
    /* PAGE HEADER */
    .page-header{
        text-align: center;
        height:auto;
        float:none;
        padding-bottom:0px;
    }
    .page-header .big-image{
        float:none;
        width:70%;
        margin-right:0px;
    }
    .page-header .content{
        margin-left:0px; 
        margin-top:0px;
        float:none;
    }
    .page-header .content p{
        width:100%;   
    }


	/* ID */
	body.page-id .image{
        width:100%;
    }

	/* Search */
	body.page-search .sub-menu li.short-url{
		display:none;
	}
    

}


/* Mobile (Landscape) */
@media only screen and (min-width: 480px) and (max-width: 767px) {

}
<style>


<script src="http://maps.googleapis.com/maps/api/js"></script>
<script type="text/javascript">



var map_types = {
    vfrc: {
        max_zoom: 12,
        default_zoom: 10
    },
    tac: {
        max_zoom: 12,
        default_zoom: 10
    },
    sec: {
        max_zoom: 12,
        default_zoom: 10
    },
    wac: {
        max_zoom: 10,
        default_zoom: 9
    },
    enrl: {
        max_zoom: 11,
        default_zoom: 10
    },
    enrh: {
        max_zoom: 10,
        default_zoom: 9
    },
    "default": {
        default_zoom: 10,
        clean_zoom: 7
    },
    "Contrast": {
        default_zoom: 10,
        clean_zoom: 7
    }
};

function updateMap() {
    setStateCookie();
}

var state_cookie = "vrs_maptype";
function getStateCookie() {
    if (document.cookie.length > 0) {
        start = document.cookie.indexOf(state_cookie + "=");
        if (start!=-1) {
            start += state_cookie.length + 1;
            end = document.cookie.indexOf(";", start);
            if (end==-1) {
                end = document.cookie.length
            }
            return document.cookie.substring(start, end)
        }
    }
    return null
}

function setStateCookie() {
    var d = window.GoogleMap.getMapTypeId();
    var b = new Date();
    var a = new Date(b.getTime() + 30 * 86400 * 1000);
    var c = state_cookie + "=" + window.GoogleMap.getCenter().lat() + "|" + window.GoogleMap.getCenter().lng() + "|" + window.GoogleMap.getZoom() + "|" + d + ";expires=" + a.toGMTString();
    document.cookie = c
}

window.contrastStyleArray = [ // The Google map styles to use for the high contrast map.
        {
            featureType: 'poi',
            stylers: [
                { visibility: 'off' }
            ]
        },{
            featureType: 'landscape',
            stylers: [
                { saturation: -70 },
                { lightness: -30 },
                { gamma: 0.80 }
            ]
        },{
            featureType: 'road',
            stylers: [
                { visibility: 'simplified' },
                { weight: 0.4 },
                { saturation: -70 },
                { lightness: -30 },
                { gamma: 0.80 }
            ]
        },{
            featureType: 'road',
            elementType: 'labels',
            stylers: [
                { visibility: 'simplified' },
                { saturation: -46 },
                { gamma: 1.82 }
            ]
        },{
            featureType: 'administrative',
            stylers: [
                { weight: 1 }
            ]
        },{
            featureType: 'administrative',
            elementType: 'labels',
            stylers: [
                { saturation: -100 },
                { weight: 0.1 },
                { lightness: -60 },
                { gamma: 2.0 }
            ]
        },{
            featureType: 'water',
            stylers: [
                { saturation: -72 },
                { lightness: -25 }
            ]
        },{
            featureType: 'administrative.locality',
            stylers: [
                { weight: 0.1 }
            ]
        },{
            featureType: 'administrative.province',
            stylers: [
                { lightness: -43 }
            ]
        },{
            "featureType": "transit.line",
            "stylers": [
                { "visibility": "off" }
            ]
        },{
            "featureType": "transit.station.bus",
            "stylers": [
                { "visibility": "off" }
            ]
        },{
            "featureType": "transit.station.rail",
            "stylers": [
                { "visibility": "off" }
            ]
        }
    ];

var l = "hybrid";

function getMapTypeOption(a) {
    var b = window.GoogleMap.getMapTypeId();
    if (map_types[b] && map_types[b][a]) {
        return map_types[b][a]
    } else {
        return map_types["default"][a]
    }
}

function addMapTypes() {
    for (var b in map_types) {
        if (b == "default") {
            continue
        }
        if (b == "Contrast") {
        	var contrastMap = new google.maps.StyledMapType(window.contrastStyleArray,
			    {name: "Contrast"});
        	var a = {
            	mapTypeControlOptions: {
      				mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'Contrast']
    				}
            	};
	        window.GoogleMap.set(a);
            continue
        }
        var a = {
            minZoom: 4,
            maxZoom: map_types[b].max_zoom,
            name: b,
            tileSize: new google.maps.Size(256, 256),
            getTileUrl: (function(c) {
                return function(f, e) {
                    var d = f.x%(1<<e);
                    if (d < 0) {
                        d = d + (1<<e)
                    }
                    var g = (1<<e) - f.y - 1;
                    return "http://flights.hillhome.org/charts/tiles/" + c + "/" + e + "/" + d + "/" + g + ".png"
                }
            })(b)
        };
        window.GoogleMap.mapTypes.set(b, new google.maps.ImageMapType(a))
    }
}

function changeMapType() {
    var b = document.getElementById("menu_pulldown");
    var a = b.options[b.selectedIndex].value;
    window.GoogleMap.setMapTypeId(a);
}

function showMapType() {
    var b = document.getElementById("menu_pulldown");
    for (var a = 0; a < b.options.length; a++) {
        if (b.options[a].value == window.GoogleMap.getMapTypeId()) {
            b.options[a].selected = true;
            break
        }
    }
}

		


    if(VRS && VRS.globalDispatch && VRS.serverConfig) {
        VRS.globalDispatch.hook(VRS.globalEvent.bootstrapCreated, function(bootStrap) {
            // Check to see if this version of the bootstrap raises an event once the map has initialised
            if(bootStrap.hookMapInitialised) {
                // It has the event - hook it
                bootStrap.hookMapInitialised(function(pageSettings) {
                
                    // This is called once the map has been loaded. The jQuery plugin for the map will be
                    // held in pageSettings.mapPlugin. Note that this event is also raised when the page
                    // is loaded in offline mode, so we need to check that mapPlugin is good before we
                    // use it. We're also going to be using stuff specific to Google Maps, so we need to
                    // make sure that the map plugin is wrapping Google Maps.
                    if(pageSettings.mapPlugin && pageSettings.mapPlugin.getNativeType() === 'GoogleMaps') {
                        // Get the Google Maps map handle
                        window.GoogleMap = pageSettings.mapPlugin.getNative();
                        //document.body.onunload = setStateCookie;
                        var b = getStateCookie();
					    if (b) {
					    	parts = b.split("|");
					        f = parseFloat(parts[0]);
					        a = parseFloat(parts[1]);
					        m = parseInt(parts[2]);
					        l = parts[3]
						    }         
                        window.GoogleMap.set('disableDefaultUI', true);
                        window.GoogleMap.set('showMapControl', false);
                        window.GoogleMap.set('zoomControl', false);                                                
                        window.GoogleMap.set('panControl', false);                                                
                        addMapTypes();
                        //window.GoogleMap.setMapTypeId(l);
					    showMapType();
					    var existingControlsInTopRight = window.GoogleMap.controls[google.maps.ControlPosition.TOP_RIGHT];
					    existingControlsInTopRight.push(document.getElementById("main_toolbar"));
                                                                                        
                        var existingControlsInTopLeft = window.GoogleMap.controls[google.maps.ControlPosition.TOP_LEFT];
                        var existingControlsInRightBottom = window.GoogleMap.controls[google.maps.ControlPosition.RIGHT_BOTTOM];
                        getTileOverlay("radar", .45);
					    getTileOverlay("eurorad", .45);
					    getTileOverlay("sat", .45);
					    getTileOverlay("satrad", .45);
					    getTileOverlay("windspeed", .45);
                        existingControlsInTopLeft.push(document.getElementById("weather_toolbar"));
                        existingControlsInRightBottom.push(document.getElementById("weather_legend"));
                        google.maps.event.addListener(window.GoogleMap, "center_changed", function() {
        					localStorage.CenterLat = window.GoogleMap.getCenter().lat();
       						localStorage.CenterLon = window.GoogleMap.getCenter().lng()
    						});
    					google.maps.event.addListener(window.GoogleMap, "zoom_changed", function() {
        					localStorage.ZoomLvl = window.GoogleMap.getZoom()
    						});
    					google.maps.event.addListener(window.GoogleMap, "idle", WXOverlayControl.prototype.updateMap2);
    					
    					// Periodically update weather series data
						window.setInterval(function() {
						    $.ajax({
							    type: "GET",
							    url: "//g.imwx.com/TileServer/jserieslist.do?function=loadSeries&amp;id=wx&time=" + Date.now(),
							    dataType: "script",
							    success:function(result){
								result; // Executes the new script
								// Now refresh the tile URLs
							  	getTileOverlay("radar", .45);
							    getTileOverlay("sat", .45);
							    getTileOverlay("satrad", .45);
							    getTileOverlay("windspeed", .45);
    							}
							});
						}, 60000);
    					
                    }
                });
            }
        });
    }

</script>
